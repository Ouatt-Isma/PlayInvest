<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PlayInvest ¬∑ Test de Profil Investisseur (30 questions)</title>
  <style>
    :root{
      --bg:#ffffff; --card:#ffffff; --muted:#475569; --text:#0f172a;
      --primary:#22c55e; --secondary:#2563eb; --chip:#f8fafc; --border:#e5e7eb;
      --shadow:0 6px 16px rgba(2,6,23,0.08);
    }
    html,body{height:100%}
    body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto; background:var(--bg); color:var(--text)}
    .container{max-width:1100px; margin:32px auto; padding:0 16px}
    .header{display:flex; gap:16px; align-items:center; margin-bottom:20px}
    .logo{width:44px; height:44px; border-radius:12px; background:linear-gradient(135deg,var(--secondary),var(--primary)); display:grid; place-items:center; font-weight:800; color:#fff}
    h1{font-size:clamp(20px,2.6vw,32px); margin:0 0 4px}
    .sub{color:var(--muted); font-size:14px}
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:var(--shadow)}
    .grid{display:grid; grid-template-columns:1fr; gap:16px}
    @media(min-width:920px){.grid{grid-template-columns:1fr 360px}}
    .q{background:#fff; border:1px solid var(--border); border-radius:14px; padding:14px}
    .q h3{margin:0 0 8px; font-size:16px}
    fieldset{border:0; margin:0; padding:0}
    .choices{display:grid; gap:8px}
    .choice{display:flex; align-items:flex-start; gap:10px; background:var(--chip); padding:10px 12px; border-radius:12px; border:1px solid var(--border)}
    .choice:hover{border-color:#cbd5e1}
    .choice input{accent-color:var(--primary); margin-top:2px}
    .kpi{display:flex; gap:10px; flex-wrap:wrap}
    .chip{background:var(--chip); border:1px solid var(--border); padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted)}
    .actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    button{cursor:pointer; border:1px solid var(--border); border-radius:12px; padding:10px 14px; font-weight:600; color:#0f172a; background:#f8fafc}
    button.primary{background:linear-gradient(180deg,var(--primary),#16a34a); color:#fff; border-color:transparent}
    button.secondary{background:linear-gradient(180deg,var(--secondary),#1d4ed8); color:#fff; border-color:transparent}
    .progress{height:10px; background:#f1f5f9; border:1px solid var(--border); border-radius:999px; overflow:hidden}
    .bar{height:100%; width:0%; background:linear-gradient(90deg,var(--secondary),var(--primary))}
    .result{display:none; gap:12px}
    .badge{display:inline-block; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px}
    .r-prudent{background:#dcfce7; color:#065f46; border:1px solid #86efac}
    .r-modere{background:#dbeafe; color:#1e3a8a; border:1px solid #93c5fd}
    .r-equilibre{background:#fef3c7; color:#7c2d12; border:1px solid #fcd34d}
    .r-dynamique{background:#ffe4d5; color:#7c2d12; border:1px solid #fdba74}
    .r-audacieux{background:#fee2e2; color:#7f1d1d; border:1px solid #fecaca}
    .note{color:var(--muted); font-size:13px}
    .right .card{position:sticky; top:16px}
    .right ul.note li{display:flex; align-items:center; gap:8px; line-height:1.4}
    .right ul.note li .desc{color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">PI</div>
      <div>
        <h1>Test de Profil Investisseur ‚Äî 30 questions</h1>
        <div class="sub">D√©terminez votre profil (Prudent ‚Üí Audacieux) selon vos objectifs, votre horizon et votre tol√©rance au risque.</div>
      </div>
    </div>

    <div class="grid">
      <main>
        <div class="card" id="formCard">
          <div class="kpi">
            <span class="chip" id="answeredChip">0 / 30 r√©pondues</span>
            <span class="chip">Dur√©e ~ 5 min</span>
            <span class="chip">Bar√®me 1 √† 5 pts / question</span>
          </div>
          <div class="progress" aria-label="Progression"><div class="bar" id="bar"></div></div>
          <form id="quiz" novalidate></form>
          <div class="actions">
            <button type="button" class="primary" id="submitBtn">Calculer mon profil</button>
          </div>
        </div>

        <div class="card result" id="resultCard" aria-live="polite">
          <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
            <span id="profileBadge" class="badge">Profil</span>
            <span id="scoreSpan" class="chip"></span>
          </div>
          <p id="profileTitle" style="font-size:18px; font-weight:700; margin-top:6px;">‚Äî</p>
          <p id="profileRange" class="note" style="margin:0 0 4px 0"></p>
          <p id="profileDesc" style="margin-bottom:8px"></p>
          <div style="display:grid; gap:12px">
            <div class="q"><h3>üß© Allocation recommand√©e (exemple)</h3><div id="allocList" class="note"></div></div>
            <div class="q"><h3>üß† Comportements & pi√®ges fr√©quents</h3><ul id="biases" class="note" style="margin:0; padding-left:18px"></ul></div>
            <div class="q"><h3>üìö Conseils pour progresser</h3><ul id="learn" class="note" style="margin:0; padding-left:18px"></ul></div>
            <div class="q"><h3>‚ö†Ô∏è Risques √† surveiller</h3><ul id="risks" class="note" style="margin:0; padding-left:18px"></ul></div>
          </div>
          <div class="actions">
            <button type="button" id="backBtn">Modifier mes r√©ponses</button>
            <button type="button" class="secondary" id="exportJson">Exporter JSON</button>
          </div>
        </div>
      </main>

      <aside class="right">
        <div class="card">
          <h3 style="margin-top:0">Bar√®me & Profils</h3>
          <ul class="note" style="margin:0; padding-left:18px">
            <li><strong>30‚Äì55</strong> : <span class="badge r-prudent">Prudent</span> <span class="desc">Capital prot√©g√©, recherche de s√©curit√©.</span></li>
            <li><strong>56‚Äì85</strong> : <span class="badge r-modere">Mod√©r√©</span> <span class="desc">√âquilibre entre risque et rendement.</span></li>
            <li><strong>86‚Äì115</strong> : <span class="badge r-equilibre">√âquilibr√©</span> <span class="desc">Diversifi√©, accepte des hauts et des bas.</span></li>
            <li><strong>116‚Äì135</strong> : <span class="badge r-dynamique">Dynamique</span> <span class="desc">Vise la croissance sur le long terme.</span></li>
            <li><strong>136‚Äì150</strong> : <span class="badge r-audacieux">Audacieux</span> <span class="desc">Cherche la performance, fortes variations possibles.</span></li>
          </ul>
          <hr style="border-color:#e5e7eb; border-style:solid; border-width:1px; margin:14px 0" />
          <p class="note">R√©pondez √† toutes les questions (A‚ÜíE). Chaque choix vaut 1 √† 5 points.</p>
        </div>
      </aside>
    </div>

    <div class="foot">¬© PlayInvest ‚Äî Module profil investisseur (HTML/JS). Version 1.2</div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function(){
    // 30 Questions
    const questions = [
      {id:1,label:"Quel est votre principal objectif ?",opt:[{t:"Pr√©server mon capital",s:1},{t:"Meilleur rendement qu‚Äôun livret",s:2},{t:"Pr√©parer un projet moyen terme",s:3},{t:"Faire cro√Ætre mon √©pargne √† long terme",s:4},{t:"Maximiser mes gains",s:5}]},
      {id:2,label:"Quelle phrase vous d√©crit le mieux ?",opt:[{t:"Je d√©teste perdre de l‚Äôargent.",s:1},{t:"Je veux un rendement s√ªr.",s:2},{t:"Je cherche un bon √©quilibre.",s:3},{t:"Je peux supporter des pertes temporaires.",s:4},{t:"J‚Äôaime le risque.",s:5}]},
      {id:3,label:"Pourquoi investissez-vous ?",opt:[{t:"S√©curit√©",s:1},{t:"Pr√©server l‚Äôinflation",s:2},{t:"Croissance du capital",s:3},{t:"Revenu compl√©mentaire",s:4},{t:"Enrichissement rapide",s:5}]},
      {id:4,label:"Quelle performance annuelle attendez-vous ?",opt:[{t:"2‚Äì3 %",s:1},{t:"4‚Äì5 %",s:2},{t:"6‚Äì8 %",s:3},{t:"9‚Äì12 %",s:4},{t:"> 12 %",s:5}]},
      {id:5,label:"Que pensez-vous des march√©s financiers ?",opt:[{t:"Trop risqu√©s",s:1},{t:"Complexes",s:2},{t:"Int√©ressants",s:3},{t:"N√©cessaires pour cr√©er de la valeur",s:4},{t:"Passionnants",s:5}]},
      {id:6,label:"√Ä quelle fr√©quence voulez-vous suivre vos investissements ?",opt:[{t:"Jamais",s:1},{t:"Annuellement",s:2},{t:"Trimestriellement",s:3},{t:"Mensuellement",s:4},{t:"Chaque jour",s:5}]},
      {id:7,label:"Quelle dur√©e d‚Äôinvestissement envisagez-vous ?",opt:[{t:"< 2 ans",s:1},{t:"2‚Äì4 ans",s:2},{t:"5‚Äì7 ans",s:3},{t:"8‚Äì10 ans",s:4},{t:"> 10 ans",s:5}]},
      {id:8,label:"√Ä quel moment aurez-vous besoin de ces fonds ?",opt:[{t:"Rapidement",s:1},{t:"Sous 3 ans",s:2},{t:"Entre 4 et 6 ans",s:3},{t:"Au-del√† de 8 ans",s:4},{t:"Pas avant longtemps",s:5}]},
      {id:9,label:"Quelle est votre situation financi√®re ?",opt:[{t:"Revenus instables, peu d‚Äô√©pargne",s:1},{t:"Revenus stables, peu d‚Äô√©pargne",s:2},{t:"Bonne stabilit√© financi√®re",s:3},{t:"Bon patrimoine et √©pargne r√©guli√®re",s:4},{t:"Tr√®s bonne aisance financi√®re",s:5}]},
      {id:10,label:"Quelle part de votre patrimoine √™tes-vous pr√™t √† investir ?",opt:[{t:"< 10 %",s:1},{t:"10‚Äì20 %",s:2},{t:"20‚Äì40 %",s:3},{t:"40‚Äì60 %",s:4},{t:"> 60 %",s:5}]},
      {id:11,label:"Quelle perte maximale pouvez-vous accepter en une ann√©e ?",opt:[{t:"0 %",s:1},{t:"-5 %",s:2},{t:"-10 %",s:3},{t:"-20 %",s:4},{t:"-30 % ou plus",s:5}]},
      {id:12,label:"Comment r√©agiriez-vous √† une baisse de 10 % ?",opt:[{t:"Je vends tout",s:1},{t:"J‚Äôattends",s:2},{t:"Je garde",s:3},{t:"Je renforce",s:4},{t:"J‚Äôinvestis davantage",s:5}]},
      {id:13,label:"Votre capital doit-il √™tre garanti ?",opt:[{t:"Oui, imp√©rativement",s:1},{t:"De pr√©f√©rence",s:2},{t:"Peu importe si rendement sup√©rieur",s:3},{t:"Non, je privil√©gie la performance",s:4},{t:"Pas du tout",s:5}]},
      {id:14,label:"Si vos placements chutent de 20 %, vous‚Ä¶",opt:[{t:"Paniquez",s:1},{t:"Vous inqui√©tez",s:2},{t:"Restez calme",s:3},{t:"Analysez la situation",s:4},{t:"Achetez davantage",s:5}]},
      {id:15,label:"Que pensez-vous des cryptomonnaies ?",opt:[{t:"Trop risqu√©es",s:1},{t:"Je m‚Äôy int√©resse",s:2},{t:"Une petite part, pourquoi pas",s:3},{t:"J‚Äôen ai d√©j√†",s:4},{t:"J‚Äôen trade activement",s:5}]},
      {id:16,label:"Investir dans un produit sans garantie mais √† fort potentiel ?",opt:[{t:"Non",s:1},{t:"Rarement",s:2},{t:"Parfois",s:3},{t:"Oui",s:4},{t:"Oui, sans h√©siter",s:5}]},
      {id:17,label:"Votre niveau de connaissance en finance ?",opt:[{t:"Nul",s:1},{t:"Basique",s:2},{t:"Moyen",s:3},{t:"Bon",s:4},{t:"Avanc√©",s:5}]},
      {id:18,label:"Avez-vous d√©j√† investi en bourse ?",opt:[{t:"Jamais",s:1},{t:"Oui via assurance-vie",s:2},{t:"Quelques actions/ETF",s:3},{t:"Portefeuille suivi activement",s:4},{t:"Exp√©rience du trading",s:5}]},
      {id:19,label:"Savez-vous ce qu‚Äôest un ETF ?",opt:[{t:"Non",s:1},{t:"Vaguement",s:2},{t:"J‚Äôen ai entendu parler",s:3},{t:"J‚Äôen poss√®de",s:4},{t:"Je les compare et s√©lectionne",s:5}]},
      {id:20,label:"Comment suivez-vous l‚Äôactualit√© financi√®re ?",opt:[{t:"Jamais",s:1},{t:"Par hasard",s:2},{t:"M√©dias grand public",s:3},{t:"R√©guli√®rement",s:4},{t:"Quotidiennement et activement",s:5}]},
      {id:21,label:"Avez-vous d√©j√† diversifi√© vos placements ?",opt:[{t:"Non",s:1},{t:"Un peu",s:2},{t:"Plusieurs supports",s:3},{t:"Oui, avec strat√©gie",s:4},{t:"Oui, y compris internationalement",s:5}]},
      {id:22,label:"Votre discipline d‚Äô√©pargne ?",opt:[{t:"Inconstante",s:1},{t:"Moyenne",s:2},{t:"R√©guli√®re",s:3},{t:"Rigoureuse",s:4},{t:"Tr√®s rigoureuse",s:5}]},
      {id:23,label:"Vous pr√©f√©rez‚Ä¶",opt:[{t:"Un gain s√ªr de 500 ‚Ç¨",s:1},{t:"50 % de chances de gagner 1 000 ‚Ç¨",s:3},{t:"20 % de chances de gagner 3 000 ‚Ç¨",s:5}]},
      {id:24,label:"Si un proche critique la bourse comme un ‚Äòcasino‚Äô, vous‚Ä¶",opt:[{t:"√ätes d‚Äôaccord",s:1},{t:"Doutez un peu",s:2},{t:"Restez curieux",s:3},{t:"D√©fendez l‚Äôinvestissement raisonn√©",s:4},{t:"Argumentez passionn√©ment",s:5}]},
      {id:25,label:"Vous √™tes plut√¥t‚Ä¶",opt:[{t:"Prudent et rationnel",s:1},{t:"Calculateur",s:2},{t:"R√©fl√©chi mais opportuniste",s:3},{t:"Ambitieux",s:4},{t:"Audacieux",s:5}]},
      {id:26,label:"Une perte ponctuelle est pour vous‚Ä¶",opt:[{t:"Inacceptable",s:1},{t:"Stressante",s:2},{t:"Supportable",s:3},{t:"Une le√ßon",s:4},{t:"Une opportunit√©",s:5}]},
      {id:27,label:"Si vos amis gagnent beaucoup en bourse‚Ä¶",opt:[{t:"Vous restez √† l‚Äô√©cart",s:1},{t:"Vous doutez",s:2},{t:"Vous observez",s:3},{t:"Vous essayez",s:4},{t:"Vous les imitez imm√©diatement",s:5}]},
      {id:28,label:"Quand les march√©s baissent, vous‚Ä¶",opt:[{t:"Paniquez",s:1},{t:"Attendez",s:2},{t:"Analysez",s:3},{t:"Achetez",s:4},{t:"Achetez plus encore",s:5}]},
      {id:29,label:"Si un actif triple, vous‚Ä¶",opt:[{t:"Vendez tout",s:1},{t:"S√©curisez la moiti√©",s:2},{t:"Laissez courir",s:3},{t:"R√©investissez",s:4},{t:"Prenez plus de risque",s:5}]},
      {id:30,label:"Quelle citation vous correspond le mieux ?",opt:[{t:"Mieux vaut un petit gain s√ªr qu‚Äôun grand risque.",s:1},{t:"Qui ne risque rien n‚Äôa rien.",s:3},{t:"Le temps est l‚Äôalli√© de l‚Äôinvestisseur.",s:4},{t:"No risk, no reward.",s:5}]},
    ];

    // Profils (texte simple fourni)
    const profiles = [
      {name:"Prudent",range:[30,55],badge:"r-prudent",emoji:"üõ°Ô∏è",desc:"La s√©curit√© avant tout ! Vous pr√©f√©rez prot√©ger votre capital plut√¥t que de chercher des rendements √©lev√©s. La stabilit√© et la pr√©servation de votre √©pargne sont vos priorit√©s.",
        alloc:["70% : Obligations (placements s√©curis√©s)","20% : Liquidit√©s (√©pargne disponible)","10% : Actions (pour une l√©g√®re croissance)"],
        biases:["√âviter tout risque : peur de perdre m√™me avec des opportunit√©s raisonnables","Trop de prudence : l‚Äôinflation grignote le pouvoir d‚Äôachat","Attentisme : remettre sans cesse les d√©cisions"],
        learning:["D√©buter doucement avec des ETF obligataires de qualit√©","√âchelonner vos investissements (DCA) pour r√©duire le stress","Demander un avis pour une strat√©gie tr√®s s√©curis√©e"],
        risks:["Trop de s√©curit√© = rendements insuffisants √† long terme","√âpargne immobilis√©e sur des comptes faiblement r√©mun√©r√©s","Manquer la croissance des march√©s par exc√®s de prudence"]},
      {name:"Mod√©r√©",range:[56,85],badge:"r-modere",emoji:"‚öñÔ∏è",desc:"Vous cherchez un √©quilibre intelligent entre s√©curit√© et rendement. Vous acceptez un risque mod√©r√© pour obtenir de meilleurs rendements, sans exc√®s.",
        alloc:["40% : Obligations (stables)","40% : Actions mondiales (ETF diversifi√©s)","20% : Liquidit√©s (√©pargne de s√©curit√©)"],
        biases:["Ancrage : se fixer sur un rendement pass√©","Biais de confirmation : ne lire que ce qui confirme son id√©e","Timer le march√© : vouloir acheter/vendre au ‚Äòbon moment‚Äô"],
        learning:["R√©√©quilibrer son portefeuille 1 fois/an","Diversifier davantage par zones et secteurs","Se fixer des objectifs de rendement r√©alistes"],
        risks:["Acheter ou vendre sous l‚Äô√©motion","Trop peu d‚Äôactions pour le long terme","Accumuler des placements qui se ressemblent"]},
      {name:"√âquilibr√©",range:[86,115],badge:"r-equilibre",emoji:"üåç",desc:"Vous visez une croissance r√©guli√®re en acceptant les fluctuations normales des march√©s. Horizon moyen/long terme avec la diversification comme cl√©.",
        alloc:["60% : Actions (diversifi√©es mondialement)","30% : Obligations (pour lisser les variations)","10% : Liquidit√©s (pour les opportunit√©s)"],
        biases:["Sur‚Äër√©action aux mauvaises nouvelles","Trop diversifi√© : difficile de tout suivre","Oublier de r√©√©quilibrer r√©guli√®rement"],
        learning:["Automatiser les investissements (versements programm√©s)","Diversifier aussi c√¥t√© obligations (international)","Rester disciplin√© pendant les p√©riodes de volatilit√©"],
        risks:["Vendre en panique lors des baisses","N√©gliger les frais (courtage/ETF)","Suivre la mode au lieu du plan"]},
      {name:"Dynamique",range:[116,135],badge:"r-dynamique",emoji:"üìà",desc:"Vous visez une croissance forte sur le long terme et acceptez une volatilit√© importante. Risques calcul√©s pour des rendements sup√©rieurs.",
        alloc:["80% : Actions (dont une partie ‚Äòcroissance‚Äô)","15% : Obligations (pour diversifier)","5% : Liquidit√©s (saisir des opportunit√©s)"],
        biases:["Sur‚Äëconfiance dans ses pr√©visions","Chasse aux performances pass√©es","N√©gliger la protection du capital"],
        learning:["Garder une base large d‚Äôactions diversifi√©es","Surveiller l‚Äôendettement des entreprises en portefeuille","Isoler une poche s√©curis√©e pour les projets court terme"],
        risks:["Trop concentr√© sur certains secteurs","Oublier de s√©curiser apr√®s une forte hausse","Sous‚Äëestimer l‚Äôimpact des crises sur la psychologie"]},
      {name:"Audacieux",range:[136,150],badge:"r-audacieux",emoji:"üöÄ",desc:"Vous recherchez la performance maximale et acceptez une volatilit√© tr√®s √©lev√©e. Horizon long et confort avec de fortes fluctuations.",
        alloc:["95% : Actions (dont titres individuels, secteurs sp√©cifiques)","5% : Actifs alternatifs (crypto, private equity, etc.)"],
        biases:["Exc√®s de confiance dans ses choix","Toujours en qu√™te de ‚Äòtr√®s haut rendement‚Äô","Ignorer des signaux de risque"],
        learning:["Garder une petite poche tr√®s s√©curis√©e pour les urgences","Documenter vos d√©cisions pour apprendre (journal)","Rester inform√© sur les risques sp√©cifiques √† vos placements"],
        risks:["Pertes importantes lors des corrections","Liquidit√© parfois faible sur certains produits","Impact √©motionnel fort en cas de baisses"]},
    ];

    // Rendu
    const formEl = document.getElementById('quiz');
    const answeredChip = document.getElementById('answeredChip');
    const bar = document.getElementById('bar');

    function renderQuestions(){
      formEl.innerHTML='';
      questions.forEach((q,idx)=>{
        const fs=document.createElement('fieldset'); fs.className='q';
        const h=document.createElement('h3'); h.textContent=`${idx+1}. ${q.label}`; fs.appendChild(h);
        const choices=document.createElement('div'); choices.className='choices';
        q.opt.forEach((o,j)=>{
          const label=document.createElement('label'); label.className='choice';
          const inp=document.createElement('input'); inp.type='radio'; inp.name=`q${q.id}`; inp.value=o.s; inp.addEventListener('change',updateProgress);
          const span=document.createElement('span'); span.innerHTML=`<strong>${String.fromCharCode(65+j)}.</strong> ${o.t}`;
          label.appendChild(inp); label.appendChild(span); choices.appendChild(label);
        });
        fs.appendChild(choices); formEl.appendChild(fs);
      });
    }

    function updateProgress(){
      const answered=[...new FormData(formEl)].filter(([k])=>k.startsWith('q')).length;
      answeredChip.textContent=`${answered} / 30 r√©pondues`;
      bar.style.width=Math.round((answered/30)*100)+'%';
    }

    function getTotalScore(){
      const fd=new FormData(formEl); let score=0,count=0; const answers={};
      questions.forEach(q=>{ const v=fd.get(`q${q.id}`); if(v!==null){score+=Number(v); count++; answers[q.id]=Number(v);} });
      return {score,count,answers};
    }

    function findProfile(score){ return profiles.find(p=>score>=p.range[0] && score<=p.range[1]); }

    // R√©sultat
    const formCard=document.getElementById('formCard');
    const resultCard=document.getElementById('resultCard');
    const profileBadge=document.getElementById('profileBadge');
    const scoreSpan=document.getElementById('scoreSpan');
    const profileTitle=document.getElementById('profileTitle');
    const profileRange=document.getElementById('profileRange');
    const profileDesc=document.getElementById('profileDesc');
    const allocList=document.getElementById('allocList');
    const biasesEl=document.getElementById('biases');
    const learnEl=document.getElementById('learn');
    const risksEl=document.getElementById('risks');

    function showResult(){
      const {score,count}=getTotalScore();
      if(count<30){ alert(`Veuillez r√©pondre √† toutes les questions (il en manque ${30-count}).`); return; }
      const prof=findProfile(score); if(!prof){ alert('Score hors bar√®me.'); return; }
      profileBadge.textContent=prof.name; profileBadge.className=`badge ${prof.badge}`;
      scoreSpan.textContent=`Score: ${score} / 150`;
      profileTitle.textContent=`${prof.emoji} Votre r√©sultat : Profil ${prof.name}`;
      profileRange.textContent=`Score typique : ${prof.range[0]}‚Äì${prof.range[1]} / 150`;
      profileDesc.textContent=prof.desc;
      allocList.innerHTML=`<ul style="margin:0; padding-left:18px">${prof.alloc.map(a=>`<li>${a}</li>`).join('')}</ul>`;
      biasesEl.innerHTML=''; prof.biases.forEach(b=>{const li=document.createElement('li'); li.textContent=b; biasesEl.appendChild(li);});
      learnEl.innerHTML=''; prof.learning.forEach(l=>{const li=document.createElement('li'); li.textContent=l; learnEl.appendChild(li);});
      risksEl.innerHTML=''; prof.risks.forEach(r=>{const li=document.createElement('li'); li.textContent=r; risksEl.appendChild(li);});
      formCard.style.display='none'; resultCard.style.display='grid'; window.scrollTo({top:0,behavior:'smooth'});
    }

    function backToForm(){ resultCard.style.display='none'; formCard.style.display='block'; window.scrollTo({top:0,behavior:'smooth'}); }

    function exportJson(){
      const {answers,score}=getTotalScore(); const prof=findProfile(score)||{name:'Hors bar√®me'};
      const payload={createdAt:new Date().toISOString(), score, profile:prof.name, answers};
      const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
      const url=URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='profil-investisseur-playinvest.json'; a.click(); URL.revokeObjectURL(url);
    }

    // Bind
    document.getElementById('submitBtn').addEventListener('click',showResult);
    document.getElementById('backBtn').addEventListener('click',backToForm);
    document.getElementById('exportJson').addEventListener('click',exportJson);

    // Init
    renderQuestions(); updateProgress();
  });
  </script>
</body>
</html>
